{"version":3,"file":"bundle.umd.js","sources":["../../../../eagle-sdk/perf.js","../../../../eagle-sdk/util.js","../../../../eagle-sdk/resources.js","../../../../eagle-sdk/errorCatch.js","../../../../eagle-sdk/xhr.js","../../../../eagle-sdk/util/xpath.js","../../../../eagle-sdk/behavior.js","../../../../eagle-sdk/index.js"],"sourcesContent":["// https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming\n\nlet perf = {\n    init: (cb) => {\n        let cycleFreq = 100; // 循环轮询的时间\n        let isDOMReady = false;\n        let isOnload = false;\n        let performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance;\n\n        console.log(999999)\n\n        let Util = {\n            addEventListener: function (name, callback, useCapture) {\n                if (window.addEventListener) {\n                    return window.addEventListener(name, callback, useCapture);\n                } else if (window.attachEvent) {\n                    return window.attachEvent('on' + name, callback);\n                }\n            },\n\n            domready: function (callback) {\n                if (isOnload === true) { return void 0; }\n                let timer = null;\n\n                if (document.readyState === 'interactive') {\n                    runCheck();\n                } else if (document.addEventListener) {\n                    document.addEventListener('DOMContentLoaded', function () {\n                        runCheck();\n                    }, false);\n                } else if (document.attachEvent) {\n                    document.attachEvent('onreadystatechange', function () {\n                        runCheck();\n                    });\n                }\n\n                function runCheck() {\n                    if (performance.timing.domInteractive) {\n                        clearTimeout(timer);\n                        callback();\n                        isDOMReady = true;\n                    } else {\n                        timer = setTimeout(runCheck, cycleFreq);\n                    }\n                }\n            },\n\n            onload: function (callback) {\n                let timer = null;\n\n                if (document.readyState === 'complete') {\n                    runCheck();\n                } else {\n                    Util.addEventListener('load', function () {\n                        runCheck();\n                    }, false);\n                }\n\n                function runCheck() {\n                    if (performance.timing.loadEventEnd) {\n                        clearTimeout(timer);\n                        callback();\n                        isOnload = true;\n                    } else {\n                        timer = setTimeout(runCheck, cycleFreq);\n                    }\n                }\n            }\n        };\n\n        let reportPerf = function () {\n            if (!performance) {\n                return void 0;\n            }\n\n            // 过滤无效数据；\n            function filterTime(a, b) {\n                return (a > 0 && b > 0 && (a - b) >= 0) ? (a - b) : undefined;\n            }\n\n            // append data from window.performance\n            let timing = performance.timing;\n\n            let perfData = {\n                // 网络建连： 运维、连接、服务器等\n                pervPage: filterTime(timing.fetchStart, timing.navigationStart), // 上一个页面\n                redirect: filterTime(timing.responseEnd, timing.redirectStart), // 页面重定向时间\n                dns: filterTime(timing.domainLookupEnd, timing.domainLookupStart), // DNS查找时间\n                connect: filterTime(timing.connectEnd, timing.connectStart), // TCP建连时间\n                network: filterTime(timing.connectEnd, timing.navigationStart), // 网络总耗时\n\n                // 网络接收： 可能是运维或者服务端的问题\n                send: filterTime(timing.responseStart, timing.requestStart), // 前端从发送到接收到后端第一个返回\n                receive: filterTime(timing.responseEnd, timing.responseStart), // 接受页面时间\n                request: filterTime(timing.responseEnd, timing.requestStart), // 请求页面总时间\n\n                // 前端渲染\n                dom: filterTime(timing.domComplete, timing.domLoading), // dom解析时间\n                loadEvent: filterTime(timing.loadEventEnd, timing.loadEventStart), // loadEvent时间\n                frontend: filterTime(timing.loadEventEnd, timing.domLoading), // 前端总时间\n\n                // 关键阶段\n                load: filterTime(timing.loadEventEnd, timing.navigationStart), // 页面完全加载总时间\n                domReady: filterTime(timing.domContentLoadedEventStart, timing.navigationStart), // domready时间\n                interactive: filterTime(timing.domInteractive, timing.navigationStart), // 可操作时间\n                ttfb: filterTime(timing.responseStart, timing.navigationStart),  // 首字节时间,监测服务端性能 \n            };\n\n            return perfData;\n        };\n\n        Util.domready(function () {\n            let perfData = reportPerf('domready');\n            perfData.type = 'domready';\n            cb(perfData);\n        });\n\n        Util.onload(function () {\n            let perfData = reportPerf('onload');\n            perfData.type = 'onload';\n            cb(perfData);\n        });\n    }\n};\n\nexport default perf;","export let noop = () => { };\nexport let onload = (cb) => {\n    if (document.readyState === 'complete') {\n        cb();\n    }\n    window.addEventListener('load', cb);\n};\n\nexport default {\n    noop,\n    onload\n};","import { onload } from './util.js';\n\n// 过滤无效数据\nfunction filterTime(a, b) {\n    return (a > 0 && b > 0 && (a - b) >= 0) ? (a - b) : undefined;\n}\n\nlet resolvePerformanceTiming = (timing) => {\n    let o = {\n        initiatorType: timing.initiatorType,\n        name: timing.name,\n        duration: parseInt(timing.duration),\n        redirect: filterTime(timing.redirectEnd, timing.redirectStart), // 重定向\n        dns: filterTime(timing.domainLookupEnd, timing.domainLookupStart), // DNS解析\n        connect: filterTime(timing.connectEnd, timing.connectStart), // TCP建连\n        network: filterTime(timing.connectEnd, timing.startTime), // 网络总耗时\n\n        send: filterTime(timing.responseStart, timing.requestStart), // 发送开始到接受第一个返回\n        receive: filterTime(timing.responseEnd, timing.responseStart), // 接收总时间\n        request: filterTime(timing.responseEnd, timing.requestStart), // 总时间\n\n        ttfb: filterTime(timing.responseStart, timing.requestStart), // 首字节时间\n    };\n\n    return o;\n};\n\nlet resolveEntries = (entries) => entries.map(item => resolvePerformanceTiming(item));\n\nlet resources = {\n    init: (cb) => {\n        let performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance;\n        if (!performance || !performance.getEntries) {\n            return void 0;\n        }\n\n        if (window.PerformanceObserver) {\n            let observer = new window.PerformanceObserver((list) => {\n                try {\n                    let entries = list.getEntries();\n                    cb(resolveEntries(entries));\n                } catch (e) {\n                    console.error(e);\n                }\n            });\n            observer.observe({\n                entryTypes: ['resource']\n            })\n        } else {\n            onload(() => {\n                let entries = performance.getEntriesByType('resource');\n                cb(resolveEntries(entries));\n            });\n        }\n    },\n};\n\nexport default resources;","let formatError = (errObj) => {\n    let col = errObj.column || errObj.columnNumber; // Safari Firefox\n    let row = errObj.line || errObj.lineNumber; // Safari Firefox\n    let message = errObj.message;\n    let name = errObj.name;\n\n    let { stack } = errObj;\n    if (stack) {\n        let matchUrl = stack.match(/https?:\\/\\/[^\\n]+/);\n        let urlFirstStack = matchUrl ? matchUrl[0] : '';\n        let regUrlCheck = /https?:\\/\\/(\\S)*\\.js/;\n\n        let resourceUrl = '';\n        if (regUrlCheck.test(urlFirstStack)) {\n            resourceUrl = urlFirstStack.match(regUrlCheck)[0];\n        }\n\n        let stackCol = null;\n        let stackRow = null;\n        let posStack = urlFirstStack.match(/:(\\d+):(\\d+)/);\n        if (posStack && posStack.length >= 3) {\n            [, stackCol, stackRow] = posStack;\n        }\n\n        // TODO formatStack\n        return {\n            content: stack,\n            col: Number(col || stackCol),\n            row: Number(row || stackRow),\n            message, name, resourceUrl\n        };\n    }\n\n    return {\n        row, col, message, name\n    }\n};\n\nlet errorCatch = {\n    init: (cb) => {\n        let _originOnerror = window.onerror;\n        window.onerror = (...arg) => {\n            let [errorMessage, scriptURI, lineNumber, columnNumber, errorObj] = arg;\n            // console.log(arg, 'cuowu');\n            let errorInfo = formatError(errorObj);\n            errorInfo._errorMessage = errorMessage;\n            errorInfo._scriptURI = scriptURI;\n            errorInfo._lineNumber = lineNumber;\n            errorInfo._columnNumber = columnNumber;\n            errorInfo.type = 'onerror';\n            cb(errorInfo);\n            _originOnerror && _originOnerror.apply(window, arg);\n        };\n\n        let _originOnunhandledrejection = window.onunhandledrejection;\n        window.onunhandledrejection = (...arg) => {\n            let e = arg[0];\n            let reason = e.reason;\n            cb({\n                type: e.type || 'unhandledrejection',\n                reason\n            });\n            _originOnunhandledrejection && _originOnunhandledrejection.apply(window, arg);\n        };\n    },\n};\n\nexport default errorCatch;","let xhrHook = {\n    init: (cb) => {\n        // xhr hook\n        let xhr = window.XMLHttpRequest;\n        if (xhr._eagle_flag === true) {\n            return void 0;\n        }\n        xhr._eagle_flag = true;\n\n        let _originOpen = xhr.prototype.open;\n        xhr.prototype.open = function (method, url, async, user, password) {\n            // TODO eagle url check\n            this._eagle_xhr_info = {\n                url: url,\n                method: method,\n                status: null\n            };\n            return _originOpen.apply(this, arguments);\n        };\n\n        let _originSend = xhr.prototype.send;\n        xhr.prototype.send = function (value) {\n            let _self = this;\n            this._eagle_start_time = Date.now();\n\n            let ajaxEnd = (event) => () => {\n                if (_self.response) {\n                    let responseSize = null;\n                    switch (_self.responseType) {\n                        case 'json':\n                            responseSize = JSON && JSON.stringify(_this.response).length;\n                            break;\n                        case 'blob':\n                        case 'moz-blob':\n                            responseSize = _self.response.size;\n                            break;\n                        case 'arraybuffer':\n                            responseSize = _self.response.byteLength;\n                        case 'document':\n                            responseSize = _self.response.documentElement && _self.response.documentElement.innerHTML && (_self.response.documentElement.innerHTML.length + 28);\n                            break;\n                        default:\n                            responseSize = _self.response.length;\n                    }\n                    _self._eagle_xhr_info.event = event;\n                    _self._eagle_xhr_info.status = _self.status;\n                    _self._eagle_xhr_info.success = (_self.status >= 200 && _self.status <= 206) || _self.status === 304;\n                    _self._eagle_xhr_info.duration = Date.now() - _self._eagle_start_time;\n                    _self._eagle_xhr_info.responseSize = responseSize;\n                    _self._eagle_xhr_info.requestSize = value ? value.length : 0;\n                    _self._eagle_xhr_info.type = 'xhr';\n                    cb(this._eagle_xhr_info);\n                }\n            };\n\n            // TODO eagle url check\n            if (this.addEventListener) {\n                this.addEventListener('load', ajaxEnd('load'), false);\n                this.addEventListener('error', ajaxEnd('error'), false);\n                this.addEventListener('abort', ajaxEnd('abort'), false);\n            } else {\n                let _origin_onreadystatechange = this.onreadystatechange;\n                this.onreadystatechange = function (event) {\n                    if (_origin_onreadystatechange) {\n                        _originOpen.apply(this, arguments);\n                    }\n                    if (this.readyState === 4) {\n                        ajaxEnd('end')();\n                    }\n                };\n            }\n            return _originSend.apply(this, arguments);\n        };\n\n        // fetch hook\n        if (window.fetch) {\n            let _origin_fetch = window.fetch;\n            window.fetch = function () {\n                let startTime = Date.now();\n                let args = [].slice.call(arguments);\n\n                let fetchInput = args[0];\n                let method = 'GET';\n                let url;\n\n                if (typeof fetchInput === 'string') {\n                    url = fetchInput;\n                } else if ('Request' in window && fetchInput instanceof window.Request) {\n                    url = fetchInput.url;\n                    if (fetchInput.method) {\n                        method = fetchInput.method;\n                    }\n                } else {\n                    url = '' + fetchInput;\n                }\n\n                if (args[1] && args[1].method) {\n                    method = args[1].method;\n                }\n\n                // TODO eagle check\n                let fetchData = {\n                    method: method,\n                    url: url,\n                    status: null,\n                };\n\n                return _origin_fetch.apply(this, args).then(function (response) {\n                    fetchData.status = response.status;\n                    fetchData.type = 'fetch';\n                    fetchData.duration = Date.now() - startTime;\n                    cb(fetchData);\n                    return response;\n                });\n            }\n        }\n    }\n};\n\nexport default xhrHook;","// /html/body/div[2]/ul/li[2]\n\nlet getXpath = (element) => {\n    if (!(element instanceof Element)) {\n        return void 0;\n    }\n\n    if (element.nodeType !== 1) {\n        return void 0;\n    }\n\n    let rootElement = document.body;\n    if (element === rootElement) {\n        return void 0;\n    }\n\n\n    let childIndex = (ele) => {\n        let parent = ele.parentNode;\n        let children = [].slice.call(parent.childNodes).filter(_ => _.nodeType === 1);\n        let i = 0;\n        for (let _i = 0, len = children.length; _i < len; _i++) {\n            if (children[_i] === ele) {\n                i = _i;\n                break;\n            }\n        }\n        return i === 0 ? '' : '[' + i + ']';\n    };\n\n    let xpath = '';\n\n    while (element !== document) {\n        let tag = element.tagName.toLocaleLowerCase();\n        let eleIndex = childIndex(element);\n        xpath = '/' + tag + eleIndex + xpath;\n        element = element.parentNode;\n    }\n\n    return xpath;\n};\n\nexport default getXpath;","import getXpath from './util/xpath.js';\n\nexport default {\n    init: (cb) => {\n        cb();\n        document.addEventListener('click', (e) => {\n            let xpath = getXpath(e.target);\n            console.log('xpath: ', xpath);\n        }, false);\n    }\n}","import perf from './perf.js';\nimport resources from './resources.js';\nimport errorCatch from './errorCatch.js';\nimport xhrHook from './xhr.js';\nimport behavior from './behavior.js';\n\nperf.init((perfData) => {\n    // console.log('perf', perfData);\n});\n\nresources.init((list) => {\n    // console.log('resources', list.length === 1 ? list[0] : list);\n});\n\nerrorCatch.init((err) => {\n    console.log('errorCatch', err);\n});\n\nxhrHook.init((xhrInfo) => {\n    console.log(xhrInfo);\n});\n\nbehavior.init(() => {\n    console.log('behavior init');\n});"],"names":["perf","cb","cycleFreq","isOnload","performance","window","mozPerformance","msPerformance","webkitPerformance","log","Util","name","callback","useCapture","addEventListener","attachEvent","timer","document","readyState","runCheck","timing","domInteractive","setTimeout","loadEventEnd","reportPerf","filterTime","a","b","undefined","perfData","fetchStart","navigationStart","responseEnd","redirectStart","domainLookupEnd","domainLookupStart","connectEnd","connectStart","responseStart","requestStart","domComplete","domLoading","loadEventStart","domContentLoadedEventStart","domready","type","onload","resolvePerformanceTiming","o","initiatorType","parseInt","duration","redirectEnd","startTime","resolveEntries","entries","map","item","resources","getEntries","PerformanceObserver","observer","list","e","error","observe","getEntriesByType","formatError","errObj","col","column","columnNumber","row","line","lineNumber","message","stack","matchUrl","match","urlFirstStack","regUrlCheck","resourceUrl","test","stackCol","stackRow","posStack","length","Number","errorCatch","_originOnerror","onerror","arg","errorMessage","scriptURI","errorObj","errorInfo","_errorMessage","_scriptURI","_lineNumber","_columnNumber","apply","_originOnunhandledrejection","onunhandledrejection","reason","xhrHook","xhr","XMLHttpRequest","_eagle_flag","_originOpen","prototype","open","method","url","async","user","password","_eagle_xhr_info","arguments","_originSend","send","value","_self","_eagle_start_time","Date","now","ajaxEnd","event","response","responseSize","responseType","JSON","stringify","_this","size","byteLength","documentElement","innerHTML","status","success","requestSize","_origin_onreadystatechange","onreadystatechange","fetch","_origin_fetch","args","slice","call","fetchInput","Request","fetchData","then","getXpath","element","Element","nodeType","rootElement","body","childIndex","ele","parent","parentNode","children","childNodes","filter","_","i","_i","len","xpath","tag","tagName","toLocaleLowerCase","eleIndex","target","init","err","xhrInfo","behavior"],"mappings":"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"}